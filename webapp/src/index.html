<!DOCTYPE html>
<html>
<head>
    <script
            src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>


    <link rel="stylesheet" href="bower_components/jspanel3/source/jquery.jspanel.css"/>
    <link rel="stylesheet" href="bower_components/jquery-ui/themes/cupertino/jquery-ui.css"/>
    <link rel="stylesheet" href="css/jspanel.css"/>

    <meta charset="utf-8">
    <title>NJEditor</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #F0F0F0;
        }

        #container {
            float: left;
        }
    </style>


</head>
<body >
<div id="container" ondragover="allowDrop(event)" ondrop="drop(event)"></div>

<!-- bower:js -->
<!-- endinject -->

<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/jquery-ui/jquery-ui.js"></script>
<script src="bower_components/jquery.ui.touch-punch/dist/jquery.ui.touch-punch.min.js"></script>
<script src="bower_components/jspanel3/source/jquery.jspanel.min.js"></script>
<script src="bower_components/tinymce/tinymce.min.js"></script>
<script src="bower_components/konva/konva.min.js"></script>

<script src="./app.js"></script>
<script src="./resizable-rect.js"></script>
<script src="./screen.js"></script>
<script src="./menu-item.js"></script>
<script src="./menu.js"></script>
<script>

    $(function() {

        //new NJ.NJMenu();
        new NJ.NJScreen();

        function openPanels() {
            $.jsPanel({
                selector:      "#njPalette",
                position:      "center",
                title:         "Theme light",
                theme:         "danger",
                contentAjax: 'tools.html',
                headerControls: {
                    minimize: 'remove',
                    maximize: 'remove',
                    smallify: 'remove'
                },
                headerTitle: "Palette",
                contentSize:     {width: 180, height: 200},
                position: {
                    left: 460,
                    top:  30
                }
            });

            $.jsPanel({
                selector:      "#njProperties",
                position:      "center",
                title:         "Theme light",
                theme:         "danger",
                content: '<table id="nj-properties-div" width="94%" style="margin:3%"><tbody><tr><td>Select widget...</td></tr></tbody></table>',
                headerControls: {
                    minimize: 'remove',
                    maximize: 'remove',
                    smallify: 'remove'
                },
                headerTitle: "Properties",
                contentSize:     {width: 180, height: 300},
                position: {
                    left: 460,
                    top:  300
                }
            });

        }

        openPanels();
    });

    function allowDrop(ev) {
        console.log("recieved:"+window.njDragElement);
        ev.preventDefault();
    }

    function drop(ev) {


        switch (window.njDragElement) {
            case 'button':
                new NJ.NJResizableRect(ev.clientX, ev.clientY, {
                    name: 'somename1',
                    label: 'somelabel1',
                    onclick: {
                        type: 'code',
                        value: ''
                    }
                });
                break;
            case '':
                break;
            case '':
                break;
        };

        window.njDragElement = undefined;
        ev.preventDefault();
    }

</script>

</body>
</html>