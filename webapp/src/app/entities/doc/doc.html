<form style="margin-bottom: 20px" name="documentDetails" show-validation>
    <h1 translate="doc.title"></h1>

    <lb-alert></lb-alert>
    <lb-alert-error></lb-alert-error>

    <div class="form-group">
        <label for="field_name"><span translate="doc.name">Name:</span></label>
        <input type="text" class="form-control" name="docName" id="field_name"
               ng-model="vm.doc.name" required ng-maxlength="256"/>
        <div>
            <p class="help-block" ng-show="documentDetails.docName.$error.required" translate="entity.validation.required">
                This field is required.
            </p>
            <p class="help-block" ng-show="documentDetails.docName.$error.maxlength" translate="entity.validation.doc.name.maxLength">
                This field is required.
            </p>
        </div>

    </div>
    <div class="form-group">
        <label for="field_description"><span translate="doc.description">Description:</span></label>
        <input type="text" class="form-control" name="docDescription" id="field_description"
               ng-model="vm.doc.description" ng-maxlength="256"/>
    </div>
    <div class="form-group">
        <label for="field_comment"><span translate="doc.comment">Comment:</span></label>
        <input type="text" class="form-control" name="docComment" id="field_comment"
               ng-model="vm.doc.comment" ng-maxlength="256"/>

    </div>

    <div class="form-group">
        <label for="docTypeSelect"><span translate="doc.type">Document type:</span></label>
        <ui-select ng-model="vm.doc.type" theme="bootstrap" id="docTypeSelect" name="docTypeSelect" required>
            <ui-select-match>{{vm.doc.type}}</ui-select-match>
            <ui-select-choices repeat="item in vm.documentTypes | filter: $select.search">
                <div ng-bind-html="item"></div>
            </ui-select-choices>
        </ui-select>
        <div>
            <p class="help-block" ng-show="documentDetails.docTypeSelect.$error.required" translate="entity.validation.required">
                This field is required.
            </p>
        </div>
    </div>
</form>

<div ng-repeat="item in uploader.queue">
    <div class="container" style="margin-top: 10px">
        <div class="row">

            <div class="col-sm-3"><strong>{{ item.file.name }}</strong></div>
            <div class="col-sm-2">{{ item.file.size/1024/1024|number:2 }} MB</div>
            <div class="col-sm-2">
                <uib-progressbar value="item.progress"></uib-progressbar>
            </div>
            <div class="col-sm-1">
                <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
            </div>
            <div class="col-sm-4">
                <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()"
                        ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                    <span class="glyphicon glyphicon-upload"></span>
                    <span translate="doc.upload">Upload</span>
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()"
                        ng-disabled="!item.isUploading">
                    <span class="glyphicon glyphicon-ban-circle"></span>
                    <span translate="doc.cancel">Cancel</span>
                </button>
                <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                    <span class="glyphicon glyphicon-trash"></span>
                    <span translate="doc.remove">Remove</span>
                </button>
            </div>
        </div>
    </div>
</div>

<div ng-hide="uploader.queue.length >= 1" class="ng-hide">
    <span class="btn btn-default btn-file">
        <span translate="doc.chooseFile"></span>
        <input type="file" nv-file-select="" uploader="uploader" multiple ng-hide="uploader.queue.length >= 1">
    </span>
</div>

<!-- margin-bottom to prevent footer and buttons overlappint -->
<div style="margin-bottom: 80px; margin-top:20px">
    <button type="button" ng-disabled="documentDetails.$invalid || !uploader.getIsEverythingUploaded()"
            class="btn btn-success" ng-click="vm.save()">
        <span class="glyphicon glyphicon-save"></span>
        <span translate="{{vm.doc.id ? 'buttons.save' : 'buttons.create'}}">Save</span>
    </button>
</div>




